# 코드 리뷰 프롬프트 템플릿

## 1. 전반적인 리뷰

```
[코드]
다음 코드를 리뷰해줘:

```(언어)
(리뷰받을 코드)
```

[리뷰 관점]
다음 관점에서 리뷰해줘:
- 가독성
- 성능
- 보안
- 유지보수성
- 테스트 가능성
- 코딩 컨벤션

[특히 확인해줘]
- (특별히 신경쓰는 부분)

[질문]
개선할 점이 있다면 구체적인 코드와 함께 제안해줘.
```

### 실제 예시

```
다음 사용자 인증 코드를 리뷰해줘:

```python
def login(username, password):
    users = {"admin": "password123"}
    if username in users:
        if users[username] == password:
            return True
    return False
```

리뷰 관점:
- 보안 취약점
- 코드 품질
- 에러 처리

특히 확인해줘:
- SQL 인젝션 가능성
- 비밀번호 평문 저장 문제
- 타이밍 공격 가능성

질문:
보안 문제와 개선 방법을 구체적으로 설명해줘.
```

---

## 2. 보안 리뷰

```
[코드]
```(언어)
(보안 검토할 코드)
```

[컨텍스트]
이 코드는 (어떤 환경에서 사용되는지):
- 웹 애플리케이션
- 사용자 입력 처리
- 데이터베이스 접근
- ...

[확인 사항]
다음 보안 취약점을 검토해줘:
- SQL 인젝션
- XSS (Cross-Site Scripting)
- CSRF (Cross-Site Request Forgery)
- 인증/인가 우회
- 민감 정보 노출
- ...

[질문]
취약점이 있다면:
1. 어떤 공격이 가능한지
2. 어떻게 수정할지
3. 예방 방법
```

### 실제 예시

```
```python
from flask import Flask, request, render_template_string

app = Flask(__name__)

@app.route('/search')
def search():
    query = request.args.get('q', '')
    return render_template_string(f"<h1>검색 결과: {query}</h1>")
```

컨텍스트:
Flask 웹 애플리케이션의 검색 기능

확인 사항:
- XSS 취약점
- 템플릿 인젝션
- 입력 검증

질문:
1. 이 코드의 보안 문제는?
2. 악의적인 입력 예시는?
3. 안전하게 수정하는 방법은?
```

---

## 3. 성능 리뷰

```
[코드]
```(언어)
(성능 검토할 코드)
```

[사용 환경]
- 입력 크기: (예: 10만 개 항목)
- 실행 빈도: (예: 초당 100회)
- 성능 목표: (예: 100ms 이내)

[현재 성능]
- 실행 시간:
- 메모리 사용량:

[질문]
1. 병목 지점은?
2. 시간/공간 복잡도는?
3. 최적화 방법은?
```

### 실제 예시

```
```python
def process_data(data):
    result = []
    for item in data:
        if item not in result:
            result.append(item)
    return sorted(result)
```

사용 환경:
- 입력 크기: 10만 개
- 실행 빈도: 초당 10회
- 성능 목표: 50ms 이내

현재 성능:
- 실행 시간: 2초
- 메모리: 정상 범위

질문:
1. 시간 복잡도는?
2. 왜 느린가?
3. 어떻게 최적화할까?
```

---

## 4. 설계 리뷰

```
[코드]
```(언어)
(설계 검토할 코드)
```

[목적]
이 코드는 (무엇을 하는지):

[리뷰 포인트]
- 책임 분리 (Single Responsibility)
- 의존성
- 확장성
- 재사용성
- 테스트 가능성

[질문]
1. 설계 원칙 위반은?
2. 개선 방법은?
3. 리팩토링 제안은?
```

### 실제 예시

```
```python
class UserManager:
    def __init__(self):
        self.db = Database()

    def create_user(self, username, password):
        # 유효성 검증
        if len(password) < 8:
            print("비밀번호가 너무 짧습니다")
            return False

        # 비밀번호 해싱
        hashed = hashlib.sha256(password.encode()).hexdigest()

        # DB 저장
        self.db.insert("users", {
            "username": username,
            "password": hashed
        })

        # 이메일 발송
        send_email(username, "가입 완료!")

        return True
```

목적:
사용자 생성 및 관리

리뷰 포인트:
- 단일 책임 원칙
- 의존성 주입
- 테스트 가능성
- 에러 처리

질문:
1. 이 클래스가 너무 많은 일을 하나?
2. 어떻게 책임을 분리할까?
3. 테스트하기 쉽게 만들려면?
```

---

## 5. 테스트 코드 리뷰

```
[테스트 코드]
```(언어)
(리뷰받을 테스트 코드)
```

[피테스트 코드]
```(언어)
(테스트 대상 코드)
```

[리뷰 포인트]
- 테스트 커버리지
- 테스트 명명
- Given-When-Then 구조
- Edge case 포함
- 테스트 독립성

[질문]
1. 빠진 테스트 케이스는?
2. 테스트 품질 개선 방법은?
```

### 실제 예시

```
```python
def test_add():
    result = add(2, 3)
    assert result == 5
```

피테스트 코드:
```python
def add(a, b):
    return a + b
```

리뷰 포인트:
- 커버리지: 충분한가?
- Edge case: 고려했나?
- 테스트 이름: 명확한가?

질문:
1. 어떤 테스트가 더 필요할까?
   - 음수?
   - 0?
   - 큰 숫자?
2. 테스트 이름을 더 명확하게?
3. 여러 케이스를 parametrize로?
```

---

## 6. 문서화 리뷰

```
[코드]
```(언어)
(문서화 검토할 코드)
```

[리뷰 포인트]
- docstring 완성도
- 주석 품질
- 예시 포함
- 타입 힌트
- 에러 문서화

[질문]
문서화를 개선하려면?
```

### 실제 예시

```
```python
def process(data, mode):
    # 데이터 처리
    if mode == 1:
        return data * 2
    elif mode == 2:
        return data / 2
    else:
        return data
```

리뷰 포인트:
- 매직 넘버 (1, 2)
- 파라미터 설명 없음
- 반환값 설명 없음

질문:
1. docstring 추가
2. mode 값을 Enum으로?
3. 예시 코드 추가
```

---

## 💡 코드 리뷰 요청 팁

### 1. 컨텍스트 제공
```
"이 코드는 사용자 인증 시스템의 일부입니다.
하루에 1000명이 사용하고, 보안이 중요합니다."
```

### 2. 구체적인 우려사항
```
"특히 성능이 걱정됩니다.
10만 개 항목을 처리할 때 느려질 것 같아요."
```

### 3. 개선 범위 명시
```
"기능은 유지하면서 가독성만 개선하고 싶어요."
또는
"완전히 다시 설계해도 괜찮아요."
```

### 4. 우선순위
```
"보안 > 성능 > 가독성 순으로 중요합니다."
```

---

## 🎯 효과적인 리뷰 대화

### 초기 요청
```
"이 코드를 리뷰해주고,
특히 보안 측면에서 문제가 없는지 확인해줘."
```

### 후속 대화
```
AI: [리뷰 결과]

나: "왜 이 방법이 더 안전해?"

AI: [설명]

나: "다른 방법도 있어?"

AI: [대안 제시]

나: "각 방법의 장단점은?"

AI: [비교]

나: "좋아, 첫 번째 방법으로 적용해줘."
```

---

## 📋 리뷰 체크리스트

코드 리뷰 시 확인할 항목:

### 기본
- [ ] 코드가 작동하는가?
- [ ] 요구사항을 만족하는가?
- [ ] 에러 처리가 되어 있는가?

### 품질
- [ ] 가독성이 좋은가?
- [ ] 변수/함수명이 명확한가?
- [ ] 중복 코드가 없는가?
- [ ] 적절히 함수로 분리되었는가?

### 보안
- [ ] 입력 검증이 되는가?
- [ ] SQL 인젝션 가능성은?
- [ ] XSS 취약점은?
- [ ] 민감 정보 노출은?

### 성능
- [ ] 시간 복잡도는 적절한가?
- [ ] 메모리 사용은 효율적인가?
- [ ] 병목 지점은 없는가?

### 테스트
- [ ] 테스트 가능한 구조인가?
- [ ] 테스트가 작성되었는가?
- [ ] Edge case를 고려했는가?

---

**다음**: [learning_templates.md](./learning_templates.md)로 이동
