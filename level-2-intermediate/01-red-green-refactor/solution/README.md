# Solution - Red-Green-Refactor ì‹¬í™”

> TDDë¡œ êµ¬í˜„í•œ ê³ ê¸‰ ê³„ì‚°ê¸°ì˜ ì™„ì„±ëœ êµ¬í˜„ì…ë‹ˆë‹¤.

## âš ï¸ ì¤‘ìš”í•œ ì•ˆë‚´

### ì´ í´ë”ë¥¼ ë³´ê¸° ì „ì—...

**Solutionì€ ìµœí›„ì˜ ìˆ˜ë‹¨ì…ë‹ˆë‹¤!**

1. âœ… **ë¨¼ì € ìŠ¤ìŠ¤ë¡œ ì‹œë„í•˜ì„¸ìš”**
   - GUIDE.mdë¥¼ ë”°ë¼ ì§ì ‘ êµ¬í˜„
   - AIì™€ í˜‘ì—…í•˜ë©° ë¬¸ì œ í•´ê²°

2. âœ… **ë§‰í˜”ì„ ë•Œë§Œ ì°¸ê³ í•˜ì„¸ìš”**
   - íŠ¹ì • ë¶€ë¶„ì˜ íŒíŠ¸ë§Œ
   - ì „ì²´ ë³µì‚¬ëŠ” ê¸ˆì§€!

3. âœ… **ì´í•´í•œ í›„ ì§ì ‘ ì‘ì„±í•˜ì„¸ìš”**
   - ë³µì‚¬-ë¶™ì—¬ë„£ê¸°ë³´ë‹¤ íƒ€ì´í•‘
   - ì™œ ì´ë ‡ê²Œ êµ¬í˜„í–ˆëŠ”ì§€ ì´í•´

---

## ğŸ“‚ íŒŒì¼ êµ¬ì¡°

```
solution/
â”œâ”€â”€ README.md           # ì´ íŒŒì¼
â”œâ”€â”€ calculator.py       # ì™„ì„±ëœ ê³„ì‚°ê¸° êµ¬í˜„
â”œâ”€â”€ test_calculator.py  # ì™„ì„±ëœ í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ (60ê°œ í…ŒìŠ¤íŠ¸)
â””â”€â”€ requirements.txt    # ì˜ì¡´ì„±
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pytest test_calculator.py -v

# ì»¤ë²„ë¦¬ì§€ì™€ í•¨ê»˜
pytest test_calculator.py --cov=calculator --cov-report=term-missing

# íŠ¹ì • í´ë˜ìŠ¤ë§Œ
pytest test_calculator.py::TestBasicOperations -v
```

### ì˜ˆìƒ ê²°ê³¼

```
test_calculator.py::TestBasicOperations::test_ë‘_ìˆ«ì_ë§ì…ˆ PASSED
test_calculator.py::TestBasicOperations::test_ë‹¤ë¥¸_ìˆ«ì_ë§ì…ˆ PASSED
...
======================== 60 passed in 0.15s =========================

---------- coverage -----------
Name             Stmts   Miss  Cover   Missing
----------------------------------------------
calculator.py       XX      0   100%
----------------------------------------------
TOTAL               XX      0   100%
```

---

## ğŸ“š êµ¬í˜„ ì„¤ëª…

### í•µì‹¬ ì „ëµ

#### 1. ê´„í˜¸ ì²˜ë¦¬ (ì¬ê·€)
```python
def _handle_parentheses(expression: str) -> str:
    # ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ ê°€ì¥ ì•ˆìª½ ê´„í˜¸ ì°¾ê¸°
    pattern = r'\(([^()]+)\)'
    match = re.search(pattern, expression)

    if not match:
        return expression

    # ê´„í˜¸ ì•ˆ ê³„ì‚° (ì¬ê·€!)
    inner_result = calculate(match.group(1))

    # ê²°ê³¼ë¡œ êµì²´í•˜ê³  ë‹¤ì‹œ ì°¾ê¸°
    ...
```

**í¬ì¸íŠ¸**:
- ì¬ê·€ë¡œ ì¤‘ì²© ê´„í˜¸ ì²˜ë¦¬
- ê°€ì¥ ì•ˆìª½ë¶€í„° ê³„ì‚°

#### 2. í† í°í™”
```python
def _tokenize(expression: str) -> List[str]:
    # ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ ìˆ«ìì™€ ì—°ì‚°ì ë¶„ë¦¬
    pattern = r'(\d+\.?\d*|[\+\-\*/])'
    tokens = re.findall(pattern, expression)
    return tokens
```

**í¬ì¸íŠ¸**:
- ì •ê·œí‘œí˜„ì‹ ì‚¬ìš©
- ì†Œìˆ˜ì  ì§€ì›

#### 3. ì—°ì‚°ì ìš°ì„ ìˆœìœ„
```python
def _apply_high_priority_operations(tokens):
    # *, / ë¨¼ì € ì²˜ë¦¬
    while i < len(tokens):
        if tokens[i] in ['*', '/']:
            # ê³„ì‚°í•˜ê³  ê²°ê³¼ë¡œ êµì²´
            ...

def _apply_low_priority_operations(tokens):
    # +, - ë‚˜ì¤‘ì— ì²˜ë¦¬
    ...
```

**í¬ì¸íŠ¸**:
- ë‘ ë‹¨ê³„ë¡œ ë¶„ë¦¬
- ìš°ì„ ìˆœìœ„ ë†’ì€ ì—°ì‚° ë¨¼ì €

#### 4. ì…ë ¥ ê²€ì¦
```python
def _validate_tokens(tokens):
    # ìˆ«ìì™€ ì—°ì‚°ìê°€ ë²ˆê°ˆì•„ ë‚˜ì™€ì•¼ í•¨
    for i, token in enumerate(tokens):
        if i % 2 == 0:  # ì§ìˆ˜: ìˆ«ì
            ...
        else:  # í™€ìˆ˜: ì—°ì‚°ì
            ...
```

**í¬ì¸íŠ¸**:
- ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€
- ì¼ì° ì‹¤íŒ¨í•˜ê¸° (Fail Fast)

---

## ğŸ¯ ì£¼ìš” ë°°ìš¸ ì 

### 1. TDDì˜ ê°€ì¹˜

**Before TDD**:
```python
# í•œ ë²ˆì— ëª¨ë“  ê±¸ êµ¬í˜„í•˜ë ¤ê³  ì‹œë„
def calculate(expr):
    # 100ì¤„ì§œë¦¬ ë³µì¡í•œ ì½”ë“œ
    # ë²„ê·¸ ì°¾ê¸° ì–´ë ¤ì›€
    # ì–´ë””ì„œ í‹€ë ¸ëŠ”ì§€ ëª¨ë¦„
```

**After TDD**:
```python
# ì‘ì€ ê¸°ëŠ¥ë¶€í„° ì°¨ê·¼ì°¨ê·¼
# 1. ë‹¨ì¼ ë§ì…ˆ â†’ í…ŒìŠ¤íŠ¸
# 2. ë‹¤ë¥¸ ì—°ì‚° ì¶”ê°€ â†’ í…ŒìŠ¤íŠ¸
# 3. ë³µí•© ì—°ì‚° â†’ í…ŒìŠ¤íŠ¸
# ê° ë‹¨ê³„ë§ˆë‹¤ í™•ì‹¤íˆ ì‘ë™í•˜ëŠ” ê²ƒ í™•ì¸
```

### 2. ë¦¬íŒ©í† ë§ì˜ ì¤‘ìš”ì„±

**ì²˜ìŒ êµ¬í˜„** (Green):
```python
if op == '+':
    result = a + b
elif op == '-':
    result = a - b
elif op == '*':
    result = a * b
elif op == '/':
    result = a / b
```

**ë¦¬íŒ©í† ë§ í›„** (Refactor):
```python
# í•¨ìˆ˜ ë¶„ë¦¬, ëª…í™•í•œ êµ¬ì¡°
tokens = _tokenize(expression)
tokens = _apply_high_priority_operations(tokens)
result = _apply_low_priority_operations(tokens)
```

### 3. í•¨ìˆ˜ ë¶„ë¦¬ì˜ ì¥ì 

**í•˜ë‚˜ì˜ í° í•¨ìˆ˜**:
- ì½ê¸° ì–´ë ¤ì›€
- í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€
- ì¬ì‚¬ìš© ë¶ˆê°€

**ì‘ì€ í•¨ìˆ˜ë“¤**:
- ê° í•¨ìˆ˜ì˜ ì±…ì„ì´ ëª…í™•
- ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- ì¬ì‚¬ìš© ê°€ëŠ¥

### 4. ì •ê·œí‘œí˜„ì‹ì˜ í™œìš©

```python
# ê´„í˜¸ ì°¾ê¸°
pattern = r'\(([^()]+)\)'

# í† í°í™”
pattern = r'(\d+\.?\d*|[\+\-\*/])'
```

**ì–¸ì œ ì‚¬ìš©**:
- ë³µì¡í•œ ë¬¸ìì—´ íŒŒì‹±
- íŒ¨í„´ ë§¤ì¹­

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### í…ŒìŠ¤íŠ¸ ë¶„ë¥˜

1. **TestBasicOperations** (8ê°œ)
   - ê¸°ë³¸ ì‚¬ì¹™ì—°ì‚°
   - ì‚¼ê°ì¸¡ëŸ‰

2. **TestComplexOperations** (6ê°œ)
   - ì—¬ëŸ¬ ì—°ì‚° ì¡°í•©

3. **TestOperatorPriority** (5ê°œ)
   - ìš°ì„ ìˆœìœ„ ê²€ì¦

4. **TestParentheses** (6ê°œ)
   - ê´„í˜¸ ì²˜ë¦¬
   - ì¤‘ì²© ê´„í˜¸

5. **TestEdgeCases** (9ê°œ)
   - ì˜ˆì™¸ ìƒí™©
   - ì˜ëª»ëœ ì…ë ¥

6. **TestIntegrationScenarios** (5ê°œ)
   - ì‹¤ì „ ì‹œë‚˜ë¦¬ì˜¤

7. **TestPerformance** (2ê°œ)
   - ì„±ëŠ¥ ê´€ë ¨

**ì´ 60ê°œ í…ŒìŠ¤íŠ¸, 100% ì»¤ë²„ë¦¬ì§€**

### Given-When-Then íŒ¨í„´

```python
def test_ê³±ì…ˆ_ìš°ì„ ìˆœìœ„(self):
    # Given: 2 + 3 * 4 ìˆ˜ì‹
    expression = "2 + 3 * 4"

    # When: ê³„ì‚° ìˆ˜í–‰
    result = calculate(expression)

    # Then: ê³±ì…ˆì´ ë¨¼ì € ê³„ì‚°ë¨
    assert result == 14  # not 20!
```

---

## ğŸ’¡ ê°œì„  ê°€ëŠ¥í•œ ë¶€ë¶„

ì´ êµ¬í˜„ì€ ì™„ë²½í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê°œì„ í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ë“¤:

### 1. ìŒìˆ˜ ì§€ì›
```python
calculate("-5 + 3")   # í˜„ì¬: ì—ëŸ¬
# ê°œì„ : ìŒìˆ˜ íŒŒì‹± ë¡œì§ ì¶”ê°€
```

### 2. ì§€ìˆ˜ ì—°ì‚°
```python
calculate("2 ** 3")   # 8
# ì¶”ê°€: ** ì—°ì‚°ì ì§€ì›
```

### 3. ê³¼í•™ í•¨ìˆ˜
```python
calculate("sqrt(16)")      # 4
calculate("sin(0)")        # 0
# ì¶”ê°€: í•¨ìˆ˜ í˜¸ì¶œ íŒŒì‹±
```

### 4. ë³€ìˆ˜ ì§€ì›
```python
x = 5
calculate("x + 3")    # 8
# ì¶”ê°€: ë³€ìˆ˜ ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬
```

---

## ğŸ“ í•™ìŠµ ê³¼ì œ

### Solutionì„ ë³¸ í›„ í•  ì¼

1. **ì´í•´í•˜ê¸°**
   - ê° í•¨ìˆ˜ê°€ ì™œ í•„ìš”í•œê°€?
   - ì–´ë–»ê²Œ í˜‘ë ¥í•˜ëŠ”ê°€?
   - ì™œ ì´ë ‡ê²Œ ë‚˜ëˆ´ë‚˜?

2. **ì§ì ‘ ì‘ì„±í•˜ê¸°**
   - Solution ë‹«ê¸°
   - ì²˜ìŒë¶€í„° ë‹¤ì‹œ êµ¬í˜„
   - ê°™ì€ ê²°ê³¼ ë‚˜ì˜¬ ë•Œê¹Œì§€

3. **í™•ì¥í•˜ê¸°**
   - ìœ„ì˜ "ê°œì„  ê°€ëŠ¥í•œ ë¶€ë¶„" êµ¬í˜„
   - ìì‹ ë§Œì˜ ê¸°ëŠ¥ ì¶”ê°€

4. **ë‹¤ë¥¸ ì–¸ì–´ë¡œ**
   - JavaScriptë¡œ êµ¬í˜„
   - TypeScriptë¡œ íƒ€ì… ì•ˆì „í•˜ê²Œ

---

## ğŸ”— ë‹¤ìŒ ë‹¨ê³„

1. **ì§ì ‘ ì¬êµ¬í˜„**
   - Solution ì—†ì´ TDDë¡œ ì²˜ìŒë¶€í„°
   - ë” ë‚˜ì€ ë°©ë²• ì°¾ê¸°

2. **ë‹¤ìŒ ëª¨ë“ˆ**
   - [02-single-agent](../02-single-agent/)
   - AI ì—ì´ì „íŠ¸ ìµœì  í™œìš©

3. **ì‹¬í™” í•™ìŠµ**
   - "Refactoring" by Martin Fowler
   - "Clean Code" by Robert C. Martin

---

**ì´ Solutionì„ ì°¸ê³ í–ˆë‹¤ë©´, ê¼­ ì§ì ‘ ë‹¤ì‹œ êµ¬í˜„í•´ë³´ì„¸ìš”!**

*"ì½ëŠ” ê²ƒê³¼ í•˜ëŠ” ê²ƒì€ ì „í˜€ ë‹¤ë¦…ë‹ˆë‹¤. ì§ì ‘ íƒ€ì´í•‘í•˜ë©° ë°°ì›Œì•¼ ì§„ì§œ ë‚´ ê²ƒì´ ë©ë‹ˆë‹¤."*

---

**ë²„ì „**: 1.0
**ì‘ì„±ì¼**: 2026-01-18
**í…ŒìŠ¤íŠ¸ ìˆ˜**: 60ê°œ
**ì»¤ë²„ë¦¬ì§€**: 100%
